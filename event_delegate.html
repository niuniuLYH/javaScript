<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<div id="container">
    <ul id="test_event">
        <li>hahah</li>
        <li id="haha">eeee</li>
        <li>gggg</li>
        <li>eeeedfd</li>
    </ul>
</div>
<script type="text/javascript" src="js/eventDelegate.js"></script>
<script type="text/javascript">
    (function(){
        /**addEventListener只会兼容IE9以上，和其他浏览器，IE9以下要使用attachEvent()*/
        var index_arr = [1,2,3,4,5,6];
        var event_delegate = new EventDelegate();
        event_delegate.addEvent(document.getElementById('test_event'),'click',clickFun,false,[index_arr]);

        /**点击主函数*/
        function clickFun(index_arr){
            var e = event_delegate.eventObj;
            var targetDoc = e.target ? e.target : e.srcElement;//ie8及以下没有target属性，只有srcElement属性
            var targetParent = targetDoc.parentNode.children;
            event_delegate.addIndexOf();//给ie8及以下的浏览器，添加数组的indexOf()方法。
            var index = index_arr[0].indexOf.call(targetParent,targetDoc);//ie8及以下没有indexOf方法，只能自己重写
            console.log(index);
            event_delegate.stopEvent();//阻止事件继续冒泡
        }
    })()
</script>
</body>
</html>